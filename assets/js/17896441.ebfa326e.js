"use strict";(self.webpackChunkphysical_ai_textbook=self.webpackChunkphysical_ai_textbook||[]).push([[401],{4569:(t,e,n)=>{n.d(e,{A:()=>u});var r=n(6540),a=n(4094),o=n(2444),i=n(467),s=n(4848),l="https://physical-ai-backend-production-b62f.up.railway.app";function c(t){var e=t.content,n=t.onTranslate,a=(0,r.useState)(!1),c=a[0],u=a[1],d=(0,r.useState)(!1),p=d[0],f=d[1],g=(0,r.useState)(""),h=g[0],m=g[1],b=(0,r.useState)(""),x=b[0],v=b[1];(0,r.useEffect)(function(){var t="translation_"+function(t){for(var e=0,n=0;n<t.length;n++){e=(e<<5)-e+t.charCodeAt(n),e&=e}return e.toString(36)}(e.substring(0,100)),n=sessionStorage.getItem(t);if(n)try{var r=JSON.parse(n),a=r.translated,o=r.timestamp;Date.now()-o<36e5&&m(a)}catch(i){console.error("Cache parse error:",i)}},[e]);var y=function(){var t=(0,i.A)((0,o.A)().m(function t(){var r,a,i,s,c;return(0,o.A)().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!p){t.n=1;break}return f(!1),n&&n(""),t.a(2);case 1:if(!h){t.n=2;break}return f(!0),n&&n(h),t.a(2);case 2:return u(!0),v(""),t.p=3,t.n=4,fetch(l+"/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e,target_language:"urdu"})});case 4:if((r=t.v).ok){t.n=5;break}throw new Error("Translation failed");case 5:return t.n=6,r.json();case 6:a=t.v,i=a.translated,m(i),f(!0),s="translation_"+function(t){for(var e=0,n=0;n<t.length;n++){e=(e<<5)-e+t.charCodeAt(n),e&=e}return e.toString(36)}(e.substring(0,100)),sessionStorage.setItem(s,JSON.stringify({translated:i,timestamp:Date.now()})),n&&n(i),t.n=8;break;case 7:t.p=7,c=t.v,v("Failed to translate content. Please try again."),console.error("Translation error:",c);case 8:return t.p=8,u(!1),t.f(8);case 9:return t.a(2)}},t,null,[[3,7,8,9]])}));return function(){return t.apply(this,arguments)}}();return(0,s.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,s.jsx)("button",{onClick:y,disabled:c,style:{padding:"8px 16px",backgroundColor:p?"#28a745":"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:c?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",display:"inline-flex",alignItems:"center",gap:"8px",transition:"background-color 0.2s"},onMouseEnter:function(t){c||(t.currentTarget.style.backgroundColor=p?"#218838":"#0056b3")},onMouseLeave:function(t){t.currentTarget.style.backgroundColor=p?"#28a745":"#007bff"},children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"spinner",style:{width:"14px",height:"14px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"white",borderRadius:"50%",animation:"spin 0.6s linear infinite"}}),"Translating..."]}):p?(0,s.jsx)(s.Fragment,{children:"\u2713 Show Original"}):(0,s.jsx)(s.Fragment,{children:"\ud83c\udf10 Translate to Urdu"})}),x&&(0,s.jsx)("div",{style:{marginTop:"8px",padding:"8px 12px",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",fontSize:"14px"},children:x}),(0,s.jsx)("style",{children:"\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n      "})]})}function u(t){var e=(0,r.useState)(""),n=e[0],o=e[1],i=(0,r.useState)(""),l=(i[0],i[1]),u=(0,r.useState)(!1),d=(u[0],u[1]);(0,r.useEffect)(function(){var t=document.querySelector(".markdown");t&&o(t.textContent||"")},[t]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"translate-button-wrapper",children:(0,s.jsx)(c,{content:n,onTranslate:function(t){if(t){l(t),d(!0);var e=document.querySelector(".markdown");if(e){e.getAttribute("data-original-html")||e.setAttribute("data-original-html",e.innerHTML);var n=document.createElement("div");n.className="translated-content";var r=t.split("\n\n").map(function(t){return t.trim().startsWith("```")||t.includes("`")?'<pre style="direction: ltr; text-align: left;">'+t+"</pre>":"<p>"+t+"</p>"}).join("");n.innerHTML=r,e.innerHTML="",e.appendChild(n)}}else{d(!1);var a=document.querySelector(".markdown");if(a){var o=a.getAttribute("data-original-html");o&&(a.innerHTML=o)}}}})}),(0,s.jsx)(a.A,Object.assign({},t))]})}}}]);